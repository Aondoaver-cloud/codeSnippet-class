<div class="tab-template-content row no-margin"
     [class.tab-template-content-2]="!this.course?.courseDetails?.forum.activated || !this.course?.courseDetails?.forum.entries.length > 0">

  <!--Forum view-->
  <ul class="entries-side-view row no-margin" [class.hide]="this.fadeAnim === 'commentsShown'">
    <div *ngIf="this.course?.courseDetails?.forum.activated">
      <div *ngFor="let entry of this.course?.courseDetails?.forum.entries; let last2 = last">
        <li (mousedown)="this.fadeAnim = 'commentsHidden';"
            (click)="this.selectedEntry = entry; this.fadeAnim = 'commentsShown';" class="entry-title waves-effect"
            [class.teacher-forum]="isEntryTeacher(entry)">
          <div class="row no-margin entry-row-sep">
            <div class="col l6 m6 s6">
              <a class="forum-entry-title" [title]="entry.title">{{entry.title}}</a>
            </div>
            <div class="col l6 m6 s6 user-date-column">
              <div class="row no-margin">
                <div class="col l6 m6 s6 user-name forum-entry-author"
                     [class.teacher-name]="isEntryTeacher(entry)">{{entry?.user?.nickName}}</div>
                <div class="col l6 m6 s6 user-name forum-entry-date">{{entry?.date}}</div>
              </div>
            </div>
          </div>
          <div *ngIf="entry.comments.length > 0" class="row no-margin last-comment-row">
            <div class="col">Last comment:</div>
            <div class="col">{{getLastEntryComment(entry)?.user?.nickName}}
              , {{getLastEntryComment(entry)?.date}}</div>
          </div>
          <div *ngIf="entry.comments.length === 0" class="row no-margin last-comment-row">
            <div class="col">No comments</div>
          </div>
        </li>
        <li *ngIf="!last2">
          <div class="divider"></div>
        </li>
      </div>
    </div>
    <div class="center-align div-entry-icon">
      <a href="#course-details-modal" *ngIf="this.course?.courseDetails?.forum.activated"
         (click)="updatePostModalMode(0, 'New entry', null, null, null); this.animationService.animateIfSmall()"
         [title]="'New entry'">
        <i id="add-entry-icon" class="material-icons forum-icon">chat</i>
      </a>
      <a href="#course-details-modal" *ngIf="this.course?.courseDetails?.forum.activated"
         (click)="updatePostModalMode(3, 'New video entry', null, null, null); this.animationService.animateIfSmall()"
         [title]="'New videoentry'">
        <i id="add-videoentry-icon" class="material-icons forum-icon">videocam</i>
      </a>
      <a href="#put-delete-modal" *ngIf="this.authenticationService.isTeacher()"
         (click)="updatePutDeleteModalMode(1, 'Activate/Deactivate forum'); this.animationService.animateIfSmall()"
         class="float-to-right" title="Activate/Deactivate forum">
        <i id="edit-forum-icon" class="material-icons forum-icon">mode_edit</i>
      </a>
    </div>
  </ul>

  <div *ngIf="this.course?.courseDetails?.forum.activated" id="row-of-comments" class="row no-margin"
       [@fadeAnim]="this.fadeAnim" [class.hide]="this.fadeAnim === 'commentsHidden'">
    <div class="row no-margin-lateral">
      <a><i id="entries-sml-btn" class="material-icons center-align col l1 m1 s1 no-padding-lateral"
            (click)="this.fadeAnim = 'commentsHidden'">arrow_back</i></a>
      <div class="col l10 m10 s10 no-padding-lateral">
        <div class="row no-margin comment-section-title">
          <div class="col l6 m6 s6">{{selectedEntry?.title}}</div>
          <div class="col l6 m6 s6 user-date-column">
            <div class="row no-margin">
              <div class="col l6 m6 s6 user-name">{{selectedEntry?.user.nickName}}</div>
              <div class="col l6 m6 s6 user-name">{{selectedEntry?.date | date}}
                - {{selectedEntry?.date | date:'H:mm' }}</div>
            </div>
          </div>
        </div>
      </div>
      <div class="col l1 m1 s1 no-padding-lateral right-align">
        <a href="#course-details-modal" [title]="'New comment'"
           (click)="updatePostModalMode(1, 'New comment', selectedEntry, null, null); this.postModalCommentReplay = null; this.animationService.animateIfSmall()">
          <i class="material-icons forum-icon">chat</i>
        </a>
        <a href="#course-details-modal" [title]="'New video comment'"
           (click)="updatePostModalMode(6, 'New video comment', selectedEntry, null, null); this.postModalCommentReplay = null; this.animationService.animateIfSmall()">
          <i class="material-icons forum-icon">videocam</i>
        </a>
      </div>
    </div>
    <div class="row no-margin comments-col">
      <div *ngFor="let comment of this.selectedEntry?.comments; let last3 = last" class="comment-block"
           [class.comment-divider]="!last3">
        <app-comment [comment]="comment"></app-comment>
      </div>
    </div>
  </div>
  <!--Forum view-->

  <div *ngIf="!this.course?.courseDetails?.forum.activated">
    <app-error-message [errorTitle]="'The forum is not activated!'"
                       [errorContent]="'The teacher must activate it before you can comment'"
                       [customClass]="'warning'" [closable]="false"></app-error-message>
  </div>
  <div *ngIf="this.course?.courseDetails?.forum.activated && this.course?.courseDetails?.forum.entries.length === 0">
    <app-error-message [errorTitle]="'There are no entries yet'"
                       [errorContent]="'Be the first one! Just click on the icon above'" [customClass]="'warning'"
                       [closable]="false"></app-error-message>
  </div>
</div>
